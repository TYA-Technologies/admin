!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+C6U":function(e,n,r){"use strict";r.d(n,"a",(function(){return b})),r.d(n,"d",(function(){return y})),r.d(n,"b",(function(){return E})),r.d(n,"c",(function(){return w}));var i=r("fXoL"),d=r("ofXK"),o=["move","copy","link"];function l(e){return"application/x-dnd"===e.substr(0,"application/x-dnd".length)}function s(e){if(e.dataTransfer){var n=e.dataTransfer.types;if(!n)return"Text";for(var t=0;t<n.length;t++)if("Text"===n[t]||"application/json"===n[t]||l(n[t]))return n[t]}return null}function c(e,n){return"all"===n||"uninitialized"===n?e:e.filter((function(e){return-1!==n.toLowerCase().indexOf(e)}))}function f(e,n){var t=window.getComputedStyle(n),r=parseFloat(t.paddingTop)||0,a=parseFloat(t.paddingLeft)||0,i=parseFloat(t.borderTopWidth)||0,d=parseFloat(t.borderLeftWidth)||0;return{x:e.offsetX+a+d,y:e.offsetY+r+i}}var u={isDragging:!1,dropEffect:"none",effectAllowed:"all",type:void 0};function g(){u.isDragging=!1,u.dropEffect=void 0,u.effectAllowed=void 0,u.type=void 0}function h(e,n){!0===u.isDragging&&(u.dropEffect=n),e.dataTransfer.dropEffect=n}function p(e,n){var t=c(o,e.dataTransfer?e.dataTransfer.effectAllowed:"uninitialized");return!0===u.isDragging&&(t=c(t,u.effectAllowed)),n&&(t=c(t,n)),0===t.length?"none":e.ctrlKey&&-1!==t.indexOf("copy")?"copy":e.altKey&&-1!==t.indexOf("link")?"link":t[0]}function v(e){if(!0===u.isDragging)return u.type;var n=s(e);return null!==n&&"Text"!==n&&"application/json"!==n&&n.substr("application/x-dnd".length+1)||void 0}function D(){return!1===u.isDragging}var m=u,b=function(){var e=function(){function e(n,r,a){var d=this;t(this,e),this.elementRef=n,this.renderer=r,this.ngZone=a,this.dndEffectAllowed="copy",this.dndDraggingClass="dndDragging",this.dndDraggingSourceClass="dndDraggingSource",this.dndDraggableDisabledClass="dndDraggableDisabled",this.dndDragImageOffsetFunction=f,this.dndStart=new i.r,this.dndDrag=new i.r,this.dndEnd=new i.r,this.dndMoved=new i.r,this.dndCopied=new i.r,this.dndLinked=new i.r,this.dndCanceled=new i.r,this.draggable=!0,this.isDragStarted=!1,this.dragEventHandler=function(e){return d.onDrag(e)}}return a(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.ngZone.runOutsideAngular((function(){e.elementRef.nativeElement.addEventListener("drag",e.dragEventHandler)}))}},{key:"ngOnDestroy",value:function(){this.elementRef.nativeElement.removeEventListener("drag",this.dragEventHandler),!0===this.isDragStarted&&g()}},{key:"onDragStart",value:function(e){var n=this;if(!1===this.draggable)return!1;if(void 0!==this.dndHandle&&void 0===e._dndUsingHandle)return!1;!function(e,n,t){u.isDragging=!0,u.dropEffect="none",u.effectAllowed=n,u.type=t,e.dataTransfer.effectAllowed=n}(e,this.dndEffectAllowed,this.dndType),this.isDragStarted=!0,function(e,n,t){var r="application/x-dnd"+(n.type?"-"+n.type:""),a=JSON.stringify(n);try{e.dataTransfer.setData(r,a)}catch(d){try{e.dataTransfer.setData("application/json",a)}catch(d){var i=c(o,t);e.dataTransfer.effectAllowed=i[0],e.dataTransfer.setData("Text",a)}}}(e,{data:this.dndDraggable,type:this.dndType},m.effectAllowed),this.dragImage=this.determineDragImage(),this.renderer.addClass(this.dragImage,this.dndDraggingClass),void 0===this.dndDragImageElementRef&&void 0===e._dndUsingHandle||function(e,n,t){var r=t(e,n)||{x:0,y:0};e.dataTransfer.setDragImage(n,r.x,r.y)}(e,this.dragImage,this.dndDragImageOffsetFunction);var t=this.renderer.listen(this.elementRef.nativeElement,"drag",(function(){n.renderer.addClass(n.elementRef.nativeElement,n.dndDraggingSourceClass),t()}));this.dndStart.emit(e),e.stopPropagation()}},{key:"onDrag",value:function(e){this.dndDrag.emit(e)}},{key:"onDragEnd",value:function(e){var n,t=this;switch(m.dropEffect){case"copy":n=this.dndCopied;break;case"link":n=this.dndLinked;break;case"move":n=this.dndMoved;break;default:n=this.dndCanceled}n.emit(e),this.dndEnd.emit(e),g(),this.isDragStarted=!1,this.renderer.removeClass(this.dragImage,this.dndDraggingClass),window.setTimeout((function(){t.renderer.removeClass(t.elementRef.nativeElement,t.dndDraggingSourceClass)}),0),e.stopPropagation()}},{key:"registerDragHandle",value:function(e){this.dndHandle=e}},{key:"registerDragImage",value:function(e){this.dndDragImageElementRef=e}},{key:"determineDragImage",value:function(){return void 0!==this.dndDragImageElementRef?this.dndDragImageElementRef.nativeElement:this.elementRef.nativeElement}},{key:"dndDisableIf",set:function(e){this.draggable=!e,this.draggable?this.renderer.removeClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass):this.renderer.addClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass)}},{key:"dndDisableDragIf",set:function(e){this.dndDisableIf=e}}]),e}();return e.\u0275fac=function(n){return new(n||e)(i.Xb(i.o),i.Xb(i.N),i.Xb(i.H))},e.\u0275dir=i.Sb({type:e,selectors:[["","dndDraggable",""]],hostVars:1,hostBindings:function(e,n){1&e&&i.kc("dragstart",(function(e){return n.onDragStart(e)}))("dragend",(function(e){return n.onDragEnd(e)})),2&e&&i.Mb("draggable",n.draggable)},inputs:{dndEffectAllowed:"dndEffectAllowed",dndDraggingClass:"dndDraggingClass",dndDraggingSourceClass:"dndDraggingSourceClass",dndDraggableDisabledClass:"dndDraggableDisabledClass",dndDragImageOffsetFunction:"dndDragImageOffsetFunction",dndDisableIf:"dndDisableIf",dndDisableDragIf:"dndDisableDragIf",dndDraggable:"dndDraggable",dndType:"dndType"},outputs:{dndStart:"dndStart",dndDrag:"dndDrag",dndEnd:"dndEnd",dndMoved:"dndMoved",dndCopied:"dndCopied",dndLinked:"dndLinked",dndCanceled:"dndCanceled"}}),e}(),y=function(){var e=function e(n){t(this,e),this.elementRef=n};return e.\u0275fac=function(n){return new(n||e)(i.Xb(i.o))},e.\u0275dir=i.Sb({type:e,selectors:[["","dndPlaceholderRef",""]]}),e}(),E=function(){var e=function(){function e(n,r,a){var d=this;t(this,e),this.ngZone=n,this.elementRef=r,this.renderer=a,this.dndAllowExternal=!1,this.dndHorizontal=!1,this.dndDragoverClass="dndDragover",this.dndDropzoneDisabledClass="dndDropzoneDisabled",this.dndDragover=new i.r,this.dndDrop=new i.r,this.placeholder=null,this.disabled=!1,this.dragEnterEventHandler=function(e){return d.onDragEnter(e)},this.dragOverEventHandler=function(e){return d.onDragOver(e)},this.dragLeaveEventHandler=function(e){return d.onDragLeave(e)}}return a(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.placeholder=this.tryGetPlaceholder(),this.removePlaceholderFromDOM(),this.ngZone.runOutsideAngular((function(){e.elementRef.nativeElement.addEventListener("dragenter",e.dragEnterEventHandler),e.elementRef.nativeElement.addEventListener("dragover",e.dragOverEventHandler),e.elementRef.nativeElement.addEventListener("dragleave",e.dragLeaveEventHandler)}))}},{key:"ngOnDestroy",value:function(){this.elementRef.nativeElement.removeEventListener("dragenter",this.dragEnterEventHandler),this.elementRef.nativeElement.removeEventListener("dragover",this.dragOverEventHandler),this.elementRef.nativeElement.removeEventListener("dragleave",this.dragLeaveEventHandler)}},{key:"onDragEnter",value:function(e){if(!0!==e._dndDropzoneActive){if(void 0===e._dndDropzoneActive){var n=document.elementFromPoint(e.clientX,e.clientY);this.elementRef.nativeElement.contains(n)&&(e._dndDropzoneActive=!0)}var t=v(e);!1!==this.isDropAllowed(t)&&e.preventDefault()}else this.cleanupDragoverState()}},{key:"onDragOver",value:function(e){if(!e.defaultPrevented){var n=v(e);if(!1!==this.isDropAllowed(n)){this.checkAndUpdatePlaceholderPosition(e);var t=p(e,this.dndEffectAllowed);"none"!==t?(e.preventDefault(),h(e,t),this.dndDragover.emit(e),this.renderer.addClass(this.elementRef.nativeElement,this.dndDragoverClass)):this.cleanupDragoverState()}}}},{key:"onDrop",value:function(e){try{var n=v(e);if(!1===this.isDropAllowed(n))return;var t=function(e,n){var t=s(e);return!0===n?null!==t&&l(t)?JSON.parse(e.dataTransfer.getData(t)):{}:JSON.parse(e.dataTransfer.getData(t))}(e,D());if(!1===this.isDropAllowed(t.type))return;e.preventDefault();var r=p(e);if(h(e,r),"none"===r)return;var a=this.getPlaceholderIndex();if(-1===a)return;this.dndDrop.emit({event:e,dropEffect:r,isExternal:D(),data:t.data,index:a,type:n}),e.stopPropagation()}finally{this.cleanupDragoverState()}}},{key:"onDragLeave",value:function(e){if(void 0===e._dndDropzoneActive){var n=document.elementFromPoint(e.clientX,e.clientY);if(this.elementRef.nativeElement.contains(n))return void(e._dndDropzoneActive=!0)}this.cleanupDragoverState(),h(e,"none")}},{key:"isDropAllowed",value:function(e){if(!0===this.disabled)return!1;if(!0===D()&&!1===this.dndAllowExternal)return!1;if(!this.dndDropzone)return!0;if(!e)return!0;if(!1===Array.isArray(this.dndDropzone))throw new Error("dndDropzone: bound value to [dndDropzone] must be an array!");return-1!==this.dndDropzone.indexOf(e)}},{key:"tryGetPlaceholder",value:function(){return void 0!==this.dndPlaceholderRef?this.dndPlaceholderRef.elementRef.nativeElement:this.elementRef.nativeElement.querySelector("[dndPlaceholderRef]")}},{key:"removePlaceholderFromDOM",value:function(){null!==this.placeholder&&null!==this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder)}},{key:"checkAndUpdatePlaceholderPosition",value:function(e){if(null!==this.placeholder){this.placeholder.parentNode!==this.elementRef.nativeElement&&this.renderer.appendChild(this.elementRef.nativeElement,this.placeholder);var n=function(e,n){for(var t=n;t.parentNode!==e;){if(!t.parentNode)return null;t=t.parentNode}return t}(this.elementRef.nativeElement,e.target);null!==n&&n!==this.placeholder&&(function(e,n,t){var r=n.getBoundingClientRect();return t?e.clientX<r.left+r.width/2:e.clientY<r.top+r.height/2}(e,n,this.dndHorizontal)?n.previousSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,n):n.nextSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,n.nextSibling))}}},{key:"getPlaceholderIndex",value:function(){if(null!==this.placeholder)return Array.prototype.indexOf.call(this.elementRef.nativeElement.children,this.placeholder)}},{key:"cleanupDragoverState",value:function(){this.renderer.removeClass(this.elementRef.nativeElement,this.dndDragoverClass),this.removePlaceholderFromDOM()}},{key:"dndDisableIf",set:function(e){this.disabled=!!e,this.disabled?this.renderer.addClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass):this.renderer.removeClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass)}},{key:"dndDisableDropIf",set:function(e){this.dndDisableIf=e}}]),e}();return e.\u0275fac=function(n){return new(n||e)(i.Xb(i.H),i.Xb(i.o),i.Xb(i.N))},e.\u0275dir=i.Sb({type:e,selectors:[["","dndDropzone",""]],contentQueries:function(e,n,t){var r;1&e&&i.Qb(t,y,!0),2&e&&i.zc(r=i.lc())&&(n.dndPlaceholderRef=r.first)},hostBindings:function(e,n){1&e&&i.kc("drop",(function(e){return n.onDrop(e)}))},inputs:{dndAllowExternal:"dndAllowExternal",dndHorizontal:"dndHorizontal",dndDragoverClass:"dndDragoverClass",dndDropzoneDisabledClass:"dndDropzoneDisabledClass",dndDisableIf:"dndDisableIf",dndDisableDropIf:"dndDisableDropIf",dndDropzone:"dndDropzone",dndEffectAllowed:"dndEffectAllowed"},outputs:{dndDragover:"dndDragover",dndDrop:"dndDrop"}}),e}(),w=function(){var e=function e(){t(this,e)};return e.\u0275mod=i.Vb({type:e}),e.\u0275inj=i.Ub({factory:function(n){return new(n||e)},imports:[[d.c]]}),e}()},EaEm:function(n,r,i){"use strict";i.d(r,"a",(function(){return p}));var d=i("mrSG"),o=i("YTAs"),l=i("dihp"),s=i("fXoL"),c=i("aceb"),f=i("+C6U"),u=i("ofXK");function g(e,n){if(1&e&&(s.dc(0,"nb-list-item",5),s.dc(1,"nb-alert",6),s.Oc(2),s.cc(),s.cc()),2&e){var t=n.$implicit;s.sc("dndDraggable",t),s.Lb(1),s.sc("accent","D"===t.environmentId?"success":"W"===t.environmentId?"warning":"M"===t.environmentId?"info":"basic"),s.Lb(1),s.Qc(" ",t.applicationName,"")}}function h(e,n){if(1&e&&(s.dc(0,"nb-list-item",5),s.dc(1,"nb-alert",7),s.Oc(2),s.cc(),s.cc()),2&e){var t=n.$implicit;s.sc("dndDraggable",t),s.Lb(1),s.sc("accent","D"===t.environmentId?"success":"W"===t.environmentId?"warning":"M"===t.environmentId?"info":"basic"),s.Lb(1),s.Qc(" ",t.applicationName,"")}}var p=function(){var n=function(){function n(e,r,a){t(this,n),this.applicationService=e,this.roleService=r,this.toast=a,this.columns=[],this.isRequest=!1}return a(n,[{key:"ngOnInit",value:function(){var e=this;this.columns=[{name:"M\xe3 c\u1ed9t",prop:"applicationName"},{name:"T\xean c\u1ed9t",prop:"alias"},{name:"Nh\xf3m",prop:"applicationGroup.applicationName"},{name:"Tr\u1ea1ng th\xe1i",prop:"isEnabled"},{name:"M\xf4i tr\u01b0\u1eddng",prop:"environmentId"}],this.roleService.getOne(this.roleId,{fields:["roleName","applications"],join:[{field:"applications",select:["applicationId","applicationName","environmentId"]}]}).subscribe((function(n){e.lstDataSelected=n.applications;var t=[{field:"isEnabled",operator:"$eq",value:!0}];e.lstDataSelected.length&&t.push({field:"applicationId",operator:"$notin",value:e.lstDataSelected.map((function(e){return e.applicationId}))}),e.applicationService.getMany({fields:["applicationName","applicationGroup","isEnabled","environmentId"],filter:t}).subscribe((function(n){return e.lstDataAvailable=n}))}))}},{key:"onDrop",value:function(n,t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var a,i,d,o,l,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=n.data,i=e(this.lstDataAvailable),d=e(this.lstDataSelected),o="remove"===t?this.lstDataAvailable:this.lstDataSelected,l="insert"===t?this.lstDataAvailable:this.lstDataSelected,!((s=l.findIndex((function(e){return e.applicationId===a.applicationId})))>-1)){r.next=15;break}return o.push(a),l.splice(s,1),r.prev=3,this.isRequest=!0,r.next=7,this.roleService.patch(this.roleId,{applications:this.lstDataSelected}).toPromise();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),this.toast.danger(r.t0&&r.t0.message,"L\u1ed7i"),this.lstDataAvailable=i,this.lstDataSelected=d;case 12:return r.prev=12,this.isRequest=!1,r.finish(12);case 15:case"end":return r.stop()}}),r,this,[[3,9,12,15]])})))}}]),n}();return n.\u0275fac=function(e){return new(e||n)(s.Xb(o.b),s.Xb(l.b),s.Xb(c.qb))},n.\u0275cmp=s.Rb({type:n,selectors:[["ga-application"]],inputs:{roleId:"roleId"},decls:13,vars:3,consts:[[1,"row",3,"nbSpinner"],[1,"col-md-6"],["dndDropzone","",1,"dndList",3,"dndDrop"],["dndPlaceholderRef","",1,"dndPlaceholder"],[3,"dndDraggable",4,"ngFor","ngForOf"],[3,"dndDraggable"],[1,"full-width",3,"accent"],[3,"accent"]],template:function(e,n){1&e&&(s.dc(0,"div",0),s.dc(1,"div",1),s.dc(2,"nb-card-header"),s.Oc(3,"\u1ee8ng d\u1ee5ng ch\u01b0a ch\u1ecdn"),s.cc(),s.dc(4,"nb-list",2),s.kc("dndDrop",(function(e){return n.onDrop(e,"remove")})),s.Yb(5,"nb-list-item",3),s.Mc(6,g,3,3,"nb-list-item",4),s.cc(),s.cc(),s.dc(7,"div",1),s.dc(8,"nb-card-header"),s.Oc(9,"\u1ee8ng d\u1ee5ng \u0111\xe3 ch\u1ecdn"),s.cc(),s.dc(10,"nb-list",2),s.kc("dndDrop",(function(e){return n.onDrop(e,"insert")})),s.Yb(11,"nb-list-item",3),s.Mc(12,h,3,3,"nb-list-item",4),s.cc(),s.cc(),s.cc()),2&e&&(s.sc("nbSpinner",n.isRequest),s.Lb(6),s.sc("ngForOf",n.lstDataAvailable),s.Lb(6),s.sc("ngForOf",n.lstDataSelected))},directives:[c.kb,c.t,c.P,f.b,c.Q,f.d,u.t,f.a,c.j],styles:["nb-list[_ngcontent-%COMP%]{height:100%}.dndList[_ngcontent-%COMP%]{transition:all .3s ease}.dndList.dndDragover[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}.dndDragging[_ngcontent-%COMP%]{border:1px solid green}.dndPlaceholder[_ngcontent-%COMP%]{min-height:72px;border:1px dashed green;background-color:rgba(0,0,0,.1)}nb-alert[_ngcontent-%COMP%]{margin:0;padding:6px 12px}"]}),n}()},ronx:function(e,n,r){"use strict";r.d(n,"a",(function(){return s}));var a=r("ofXK"),i=r("1ua0"),d=r("aceb"),o=r("+C6U"),l=r("fXoL"),s=function(){var e=function e(){t(this,e)};return e.\u0275mod=l.Vb({type:e}),e.\u0275inj=l.Ub({factory:function(n){return new(n||e)},imports:[[a.c,i.a,d.u,d.p,d.R,d.lb,d.k,o.c]]}),e}()},tvm6:function(e,n,r){"use strict";r.d(n,"a",(function(){return u}));var a=r("ofXK"),i=r("1ua0"),d=r("aceb"),o=r("BDdu"),l=r("3Pt+"),s=r("DS98"),c=r("ExIg"),f=r("fXoL"),u=function(){var e=function e(){t(this,e)};return e.\u0275mod=f.Vb({type:e}),e.\u0275inj=f.Ub({factory:function(n){return new(n||e)},imports:[[a.c,i.a,d.k,o.a,d.w,l.g,s.a,d.H,d.p,d.sb,d.lb,d.u,c.e]]}),e}()}}])}();