!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,a=c(t);if(e){var r=c(this).constructor;i=Reflect.construct(a,arguments,r)}else i=a.apply(this,arguments);return n(this,i)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,c=new Array(e);n<e;n++)c[n]=t[n];return c}function r(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"1ua0":function(t,e,n){"use strict";var c=n("ArG+");n.d(e,"a",(function(){return c.a}))},"ArG+":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=n("ofXK"),i=n("aceb"),a=(n("jF+W"),n("fXoL")),r=function(){var t=function t(){s(this,t)};return t.\u0275mod=a.Vb({type:t}),t.\u0275inj=a.Ub({factory:function(e){return new(e||t)},imports:[[c.c,i.u,i.p]]}),t}()},BDdu:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n("ofXK"),i=n("fXoL"),a=function(){var t=function t(){s(this,t)};return t.\u0275mod=i.Vb({type:t}),t.\u0275inj=i.Ub({factory:function(e){return new(e||t)},imports:[[c.c]]}),t}()},Vx2E:function(t,e,n){"use strict";n.r(e),n.d(e,"DatasetModule",(function(){return G}));var c,a=n("ofXK"),r=n("ExIg"),u=n("CjdU"),l=n("nYR2"),d=n("fXoL"),f=n("tyNb"),h=n("aceb"),b=n("3Pt+"),m=n("mrSG"),p=n("VmTv"),g=((c=function(){function t(e,n){s(this,t),this.toast=e,this.datasetService=n,this.close=new d.r,this.form=new b.e({datasetId:new b.c("",[b.s.required]),datasetName:new b.c("",[b.s.required,b.s.minLength(5)])}),this.status={saving:!1}}return o(t,[{key:"ngOnInit",value:function(){}},{key:"submit",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.form.valid){t.next=14;break}return t.prev=1,this.status.saving=!0,t.next=5,this.datasetService.create(this.form.value).toPromise();case 5:this.toast.success("Th\xeam th\xe0nh c\xf4ng"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.toast.danger(t.t0.message,"L\u1ed7i");case 11:return t.prev=11,this.status.saving=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[1,8,11,14]])})))}}]),t}()).\u0275fac=function(t){return new(t||c)(d.Xb(h.qb),d.Xb(u.a))},c.\u0275cmp=d.Rb({type:c,selectors:[["app-them-moi-dataset"]],outputs:{close:"close"},decls:15,vars:8,consts:[[3,"open"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-xs-12","mb-1","mt-1"],["nbInput","","fieldSize","small","placeholder","M\xe3","formControlName","datasetId",3,"fullWidth","status"],["nbInput","","fieldSize","small","placeholder","T\xean","formControlName","datasetName",3,"fullWidth","status"],[1,"d-flex","justify-content-end"],["nbButton","","size","small","size","small","ghost","",3,"click"],["nbButton","","size","small","type","submit",3,"disabled","nbSpinner"]],template:function(t,e){1&t&&(d.dc(0,"dn-dialog",0),d.dc(1,"dn-dialog-header"),d.Oc(2,"Th\xeam m\u1edbi l\u1edbp d\u1eef li\u1ec7u"),d.cc(),d.dc(3,"dn-dialog-body"),d.dc(4,"form",1),d.kc("ngSubmit",(function(){return e.submit()})),d.dc(5,"div",2),d.dc(6,"div",3),d.Yb(7,"input",4),d.cc(),d.dc(8,"div",3),d.Yb(9,"input",5),d.cc(),d.cc(),d.dc(10,"dn-dialog-footer",6),d.dc(11,"button",7),d.kc("click",(function(){return e.close.emit()})),d.Oc(12,"\u0110\xf3ng"),d.cc(),d.dc(13,"button",8),d.Oc(14," Th\xeam m\u1edbi "),d.cc(),d.cc(),d.cc(),d.cc(),d.cc()),2&t&&(d.sc("open",!0),d.Lb(4),d.sc("formGroup",e.form),d.Lb(3),d.sc("fullWidth",!0)("status",e.form.get("datasetId").touched&&e.form.get("datasetId").invalid?"danger":"basic"),d.Lb(2),d.sc("fullWidth",!0)("status",e.form.get("datasetName").touched&&e.form.get("datasetName").invalid?"danger":"basic"),d.Lb(4),d.sc("disabled",!e.form.valid)("nbSpinner",e.status.saving))},directives:[p.d,p.f,p.c,b.u,b.k,b.f,h.G,b.b,b.j,b.d,p.e,h.o,h.kb],styles:[""]}),c),v=["table"];function y(t,e){if(1&t){var n=d.ec();d.dc(0,"input",20),d.kc("ngModelChange",(function(t){return d.Dc(n),e.row[e.column.prop]=t}))("change",(function(){d.Dc(n);var t=e.row;return d.mc().change("datasetName",t)})),d.cc()}2&t&&d.sc("ngModel",e.row[e.column.prop])}function w(t,e){if(1&t){var n=d.ec();d.dc(0,"input",20),d.kc("ngModelChange",(function(t){return d.Dc(n),e.row[e.column.prop]=t}))("change",(function(){d.Dc(n);var t=e.row;return d.mc().change("stt",t)})),d.cc()}2&t&&d.sc("ngModel",e.row[e.column.prop])}function k(t,e){if(1&t){var n=d.ec();d.dc(0,"app-them-moi-dataset",21),d.kc("close",(function(){return d.Dc(n),d.mc().dlgThemMoiDataset=!1})),d.cc()}}var D,S,C,B=((D=function(){function t(e,n,c){var i=this;s(this,t),this.datasetService=e,this.router=n,this.toast=c,this.ColumnMode=r.a,this.actions=[{name:"delete"},{name:"view-layer",tooltip:"Xem l\u1edbp d\u1eef li\u1ec7u",icon:'<i class="fas fa-layer-group"></i>',click:function(t){return i.viewLayers(t)}}],this.lstBulk=[{name:"delete",title:"X\xf3a"},{name:"update",title:"C\u1eadp nh\u1eadt t\xean t\u1eeb GDB"}],this.datatableService={service:this.datasetService,primaryField:"datasetId",builder:this.getBuilder.bind(this)},this.lstGDBRow=[],this.lstTmpGDBRow=[],this.filterValue="",this.lstDatasetSelected=[],this.status={adding:!1},this.dlgThemMoiDataset=!1,this.isSync=!1}return o(t,[{key:"ngOnInit",value:function(){this.loadDatasetGDB()}},{key:"loadDatasetGDB",value:function(){var t=this;this.datasetService.getGDBNotExists().subscribe((function(e){t.lstGDBRow=e,t.lstTmpGDBRow=i(e)}))}},{key:"viewLayers",value:function(t){this.router.navigateByUrl("/pages/layer")}},{key:"change",value:function(t,e){var n,c,i;this.datasetService.patch(e.datasetId,(n={},c=t,i=e[t],c in n?Object.defineProperty(n,c,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[c]=i,n)).subscribe()}},{key:"syncFromGDB",value:function(t){var e=this;this.isSync=!0,this.datasetService.createMany(t).pipe(Object(l.a)((function(){return e.isSync=!1}))).subscribe((function(){e.toast.success("\u0110\xe3 chuy\u1ec3n d\u1eef li\u1ec7u sang danh s\xe1ch qu\u1ea3n l\xfd","Th\xe0nh c\xf4ng"),e.table.loadData(),e.loadDatasetGDB()}),(function(t){return e.toast.danger(t||"C\xf3 l\u1ed7i x\u1ea3y ra","L\u1ed7i")}))}},{key:"filterGDB",value:function(t){var e=t.toLowerCase(),n=this.lstTmpGDBRow.filter((function(t){return t.datasetId.toLowerCase().search(e)>-1||t.datasetName.toLowerCase().search(e)>-1}));this.lstGDBRow=n}},{key:"getBuilder",value:function(t){t.select(["datasetId","datasetName","stt"]),t.setLimit(10),this.filterValue&&t.setOr([{field:"datasetId",operator:"$cont",value:this.filterValue},{field:"datasetName",operator:"$cont",value:this.filterValue}])}},{key:"bulkClick",value:function(t){var e=this;"update"===t.action.name&&this.lstDatasetSelected.length&&this.datasetService.updateAliasNameFromGDB(this.lstDatasetSelected.map((function(t){return t.datasetId}))).subscribe((function(t){e.toast.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng","Th\xe0nh c\xf4ng"),e.table.loadData()}),(function(t){return e.toast.danger(t)}))}}]),t}()).\u0275fac=function(t){return new(t||D)(d.Xb(u.a),d.Xb(f.c),d.Xb(h.qb))},D.\u0275cmp=d.Rb({type:D,selectors:[["ga-dataset"]],viewQuery:function(t,e){var n;1&t&&d.Sc(v,!0),2&t&&d.zc(n=d.lc())&&(e.table=n.first)},decls:34,vars:13,consts:[[1,"row"],[1,"col-md-6"],[1,"d-flex","justify-content-between"],["nbButton","","size","small","ghost","","nbTooltip","T\u1ea3i l\u1ea1i",3,"click"],["icon","refresh"],["nbButton","","size","small","outline","","status","primary","nbTooltip","Chuy\u1ec3n d\u1eef li\u1ec7u \u0111\u1ec3 cung c\u1ea5p cho c\xe1c \u1ee9ng d\u1ee5ng",1,"mb-3",3,"disabled","click"],["nbInput","","fieldSize","small","fullWidth","","placeholder","T\xecm theo m\xe3 ho\u1eb7c t\xean",3,"keypress"],["rowHeight","auto","columnMode","force","selectionType","checkbox",1,"material","striped","mt-2",3,"externalPaging","rows","limit"],["tableGDB",""],["name","M\xe3","prop","datasetId"],["name","T\xean","prop","datasetName"],["nbInput","","fieldSize","small","fullWidth","","placeholder","T\xecm theo m\xe3 ho\u1eb7c t\xean",3,"ngModel","ngModelChange"],["nbButton","","size","small","ghost","","nbTooltip","Th\xeam m\u1edbi","status","default",3,"click"],["selectionType","checkbox",1,"material","striped","mt-2",3,"externalPaging","limit","datatableService","actions","columnMode","bulkActions","selected","bulkClick","select"],["table",""],["prop","datasetId","name","M\xe3"],["prop","datasetName","name","T\xean"],["ngn-datatable-cell-template",""],["prop","stt","name","STT"],[3,"close",4,"ngIf"],["nbInput","","fieldSize","small","type","text","fullWidth","",3,"ngModel","ngModelChange","change"],[3,"close"]],template:function(t,e){if(1&t){var n=d.ec();d.dc(0,"div",0),d.dc(1,"nb-card",1),d.dc(2,"nb-card-header",2),d.dc(3,"span"),d.Oc(4,"Nh\xf3m d\u1eef li\u1ec7u t\u1eeb GDB"),d.cc(),d.dc(5,"button",3),d.kc("click",(function(){return e.loadDatasetGDB()})),d.Yb(6,"nb-icon",4),d.cc(),d.cc(),d.dc(7,"nb-card-body"),d.dc(8,"button",5),d.kc("click",(function(){d.Dc(n);var t=d.Ac(12);return e.syncFromGDB(t.selected)})),d.Oc(9," Chuy\u1ec3n d\u1eef li\u1ec7u "),d.cc(),d.dc(10,"input",6),d.kc("keypress",(function(t){return e.filterGDB(t.target.value)})),d.cc(),d.dc(11,"ngn-datatable",7,8),d.Yb(13,"ngn-datatable-column",9),d.Yb(14,"ngn-datatable-column",10),d.cc(),d.cc(),d.cc(),d.dc(15,"nb-card",1),d.dc(16,"nb-card-header",2),d.dc(17,"span"),d.Oc(18,"Nh\xf3m d\u1eef li\u1ec7u"),d.cc(),d.dc(19,"button",3),d.kc("click",(function(){return d.Dc(n),d.Ac(27).loadData()})),d.Yb(20,"nb-icon",4),d.cc(),d.cc(),d.dc(21,"nb-card-body"),d.dc(22,"input",11),d.kc("ngModelChange",(function(t){return e.filterValue=t}))("ngModelChange",(function(){return d.Dc(n),d.Ac(27).loadData()})),d.cc(),d.dc(23,"div"),d.dc(24,"button",12),d.kc("click",(function(){return e.dlgThemMoiDataset=!0})),d.Oc(25," Th\xeam m\u1edbi "),d.cc(),d.cc(),d.dc(26,"ngn-datatable",13,14),d.kc("bulkClick",(function(t){return e.bulkClick(t)}))("select",(function(t){return e.lstDatasetSelected=t.selected})),d.Yb(28,"ngn-datatable-column",15),d.dc(29,"ngn-datatable-column",16),d.Mc(30,y,1,1,"ng-template",17),d.cc(),d.dc(31,"ngn-datatable-column",18),d.Mc(32,w,1,1,"ng-template",17),d.cc(),d.cc(),d.cc(),d.cc(),d.cc(),d.Mc(33,k,1,0,"app-them-moi-dataset",19)}if(2&t){var c=d.Ac(12);d.Lb(8),d.sc("disabled",!c.selected.length||e.isSync),d.Lb(3),d.sc("externalPaging",!1)("rows",e.lstGDBRow)("limit",10),d.Lb(11),d.sc("ngModel",e.filterValue),d.Lb(4),d.sc("externalPaging",!0)("limit",10)("datatableService",e.datatableService)("actions",e.actions)("columnMode",e.ColumnMode.force)("bulkActions",e.lstBulk)("selected",e.lstDatasetSelected),d.Lb(7),d.sc("ngIf",e.dlgThemMoiDataset)}},directives:[h.r,h.t,h.o,h.D,h.q,h.G,r.d,r.c,b.b,b.j,b.m,r.b,a.u,g],styles:[""]}),D),M=n("1ua0"),O=n("BDdu"),T=((C=function t(){s(this,t)}).\u0275mod=d.Vb({type:C}),C.\u0275inj=d.Ub({factory:function(t){return new(t||C)},imports:[[a.c,h.H,h.p,p.g,b.p,h.k,h.lb]]}),C),G=((S=function t(){s(this,t)}).\u0275mod=d.Vb({type:S}),S.\u0275inj=d.Ub({factory:function(t){return new(t||S)},imports:[[a.c,h.u,h.p,h.H,h.lb,h.k,b.g,M.a,O.a,h.F,r.e,p.g,T,f.g.forChild([{path:"",component:B},{path:"sync",loadChildren:function(){return n.e(19).then(n.bind(null,"mdlf")).then((function(t){return t.DatasetSyncModule}))}},{path:"gdb",loadChildren:function(){return n.e(18).then(n.bind(null,"x2I5")).then((function(t){return t.DatasetGdbModule}))}}])]]}),S)},"i/XZ":function(n,c,i){"use strict";i.d(c,"a",(function(){return a}));var a=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(i,n);var c=e(i);function i(t,e){return s(this,i),c.call(this,t,e)}return i}(i("WJ/N").a)},"jF+W":function(t,e,n){"use strict";n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return p}));var c=n("fXoL"),i=n("aceb"),a=n("ofXK"),r=["*"],u=["dialog"];function l(t,e){if(1&t&&(c.dc(0,"nb-card",1),c.dc(1,"nb-card-header",2),c.qc(2),c.cc(),c.dc(3,"nb-card-body",3),c.qc(4,1),c.cc(),c.dc(5,"nb-card-footer",4),c.qc(6,2),c.cc(),c.cc()),2&t){var n=c.mc();c.sc("ngStyle",n.styles)}}var d=[[["core-dialog-header"]],[["core-dialog-body"]],[["core-dialog-footer"]]],f=["core-dialog-header","core-dialog-body","core-dialog-footer"],h=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Rb({type:t,selectors:[["core-dialog-header"]],ngContentSelectors:r,decls:1,vars:0,template:function(t,e){1&t&&(c.rc(),c.qc(0))},encapsulation:2}),t}(),b=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Rb({type:t,selectors:[["core-dialog-body"]],ngContentSelectors:r,decls:1,vars:0,template:function(t,e){1&t&&(c.rc(),c.qc(0))},encapsulation:2}),t}(),m=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Rb({type:t,selectors:[["core-dialog-footer"]],ngContentSelectors:r,decls:1,vars:0,template:function(t,e){1&t&&(c.rc(),c.qc(0))},encapsulation:2}),t}(),p=function(){var t=function(){function t(e){s(this,t),this.dialogService=e,this.closed=new c.r}return o(t,[{key:"ngOnInit",value:function(){}},{key:"openDialog",value:function(t){this.dialogRef=this.dialogService.open(this.dialog,t)}},{key:"close",value:function(){this.closed.emit(),this.dialogRef&&this.dialogRef.close()}},{key:"open",set:function(t){this._open=t,t?this.openDialog(Object.assign(Object.assign({},this.userConfig),{closeOnBackdropClick:!1,closeOnEsc:!1})):this.close()},get:function(){return this._open}},{key:"styles",get:function(){return{minWidth:this.minWidth,maxWidth:this.maxWidth||"80vw",width:this.width,maxHeight:"80vh"}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.Xb(i.C))},t.\u0275cmp=c.Rb({type:t,selectors:[["core-dialog"]],viewQuery:function(t,e){var n;1&t&&c.Jc(u,!0),2&t&&c.zc(n=c.lc())&&(e.dialog=n.first)},inputs:{open:"open",userConfig:"userConfig",style:"style",minWidth:"minWidth",maxWidth:"maxWidth",width:"width"},outputs:{closed:"closed"},ngContentSelectors:f,decls:2,vars:0,consts:[["dialog",""],[3,"ngStyle"],[1,"header"],[1,"body"],[1,"footer"]],template:function(t,e){1&t&&(c.rc(d),c.Mc(0,l,7,1,"ng-template",null,0,c.Nc))},directives:[i.r,a.x,i.t,i.q,i.s],styles:[""]}),t}()}}])}();